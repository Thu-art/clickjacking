<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Victim Page</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
        }
        button {
            padding: 10px 14px;
            margin: 6px;
            cursor: pointer;
            border: none;
            background: #cfcfcf;
            border-radius: 6px;
        }
        button.active {
            background: #4CAF50;
            color: white;
        }
        #status-box {
            padding: 10px;
            background: #fff3cd;
            border: 1px solid #ffeeba;
            margin-top: 20px;
            border-radius: 6px;
        }
    </style>

    <script>
        // üî• H√†m th√™m CSP ho·∫∑c XFO th·∫≠t S·ªöM NH·∫§T
        (function applyRealProtection() {
            const params = new URLSearchParams(location.search);
            const protection = params.get("protection");

            if (protection === "csp") {
                const meta = document.createElement("meta");
                meta.httpEquiv = "Content-Security-Policy";
                meta.content = "frame-ancestors 'none'";
                document.head.appendChild(meta);
                console.log("CSP frame-ancestors 'none' ACTIVATED");
            }

            if (protection === "xfo") {
                const meta = document.createElement("meta");
                meta.httpEquiv = "X-Frame-Options";
                meta.content = "DENY";
                document.head.appendChild(meta);
                console.log("X-Frame-Options DENY ACTIVATED");
            }
        })();
    </script>

</head>

<body>
    <h1>Victim Page</h1>
    <p>Trang n√†y ƒë·ªÉ demo clickjacking v√† b·∫≠t t·∫Øt b·∫£o v·ªá.</p>

    <h3>Ch·ªçn ch·∫ø ƒë·ªô b·∫£o v·ªá:</h3>
    <button id="noneBtn">Kh√¥ng b·∫£o v·ªá</button>
    <button id="cspBtn">CSP frame-ancestors</button>
    <button id="xfoBtn">X-Frame-Options</button>

    <div id="status-box">Ch∆∞a b·∫≠t ch·∫ø ƒë·ªô b·∫£o v·ªá n√†o.</div>

    <script>
        // G√°n n√∫t
        const noneBtn = document.getElementById("noneBtn");
        const cspBtn = document.getElementById("cspBtn");
        const xfoBtn = document.getElementById("xfoBtn");
        const statusBox = document.getElementById("status-box");

        function setActive(btn) {
            [noneBtn, cspBtn, xfoBtn].forEach(b => b.classList.remove("active"));
            btn.classList.add("active");
        }

        function updateUI() {
            const params = new URLSearchParams(location.search);
            const mode = params.get("protection");

            if (mode === "csp") {
                setActive(cspBtn);
                statusBox.innerHTML = "CSP <b>frame-ancestors 'none'</b> ƒëang ho·∫°t ƒë·ªông (REAL PROTECTION)";
            } else if (mode === "xfo") {
                setActive(xfoBtn);
                statusBox.innerHTML = "X-Frame-Options <b>DENY</b> ƒëang ho·∫°t ƒë·ªông (REAL PROTECTION)";
            } else {
                setActive(noneBtn);
                statusBox.innerHTML = "Kh√¥ng c√≥ b·∫£o v·ªá (trang n√†y c√≥ th·ªÉ b·ªã clickjacking)";
            }
        }

        noneBtn.onclick = () => { location.href = "?protection=none"; };
        cspBtn.onclick = () => { location.href = "?protection=csp"; };
        xfoBtn.onclick = () => { location.href = "?protection=xfo"; };

        updateUI();
    </script>

</body>
</html>
